{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from 'axios';\n\nconst activeForm = document.querySelector(`.form`);\nconst API_KEY = `41787862-84986491f6cfdcc41b6404efb`;\nconst loaderContainer = document.querySelector('.loader-container');\nconst loadButton = document.getElementById(`load-button`);\nlet page = 1;\nlet hits = [];\n\naxios.defaults.baseURL= `https://pixabay.com`;\n\nasync function getImage(query = \"\") {\n    return await  axios.get(\"/api\", {\n        params: {\n          key: API_KEY,\n          q: query,\n          image_type: \"photo\",\n          orientation: \"horizontal\",\n          safesearch: true,\n          page: page,\n          per_page: 40,\n        },\n      })\n      .then((response) => {\n            hideLoader();\n            hits = response.data.hits;\n            return response.data;\n        })\n        .catch((error) => {\n            iziToast.show({\n                message: `${error}`,\n                color: \"red\",\n                position: \"topRight\",\n            });\n        });\n}\n\n\nfunction showLoader() {\n    loaderContainer.style.display = 'block';\n  }\n function hideLoader() {\n    loaderContainer.style.display = 'none';\n  }\n\n  \n\nactiveForm.addEventListener(\"submit\", (event) => {\n    event.preventDefault();\n\n    const query = event.target.elements.query.value.trim();\n\nshowLoader();\n\n\nclearSearchResults();\n\n       getImage(query)\n    .then(({hits}) => { \n        if (hits.length === 0) {\n            iziToast.show({\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                color: \"red\",\n  position: \"topRight\",  \n            });\n        } else {\n            renderImages(hits);\n            \n        }\n        event.target.reset();\n    })\n    .catch(error => {\n        iziToast.show({\n            message: `${error}`,\n            color: \"red\",\nposition: \"topRight\",  \n        });\n    });\n    \n    \n})\n\n\nconst gallery = document.querySelector(`.gallery`);\n\nfunction clearSearchResults() {\n    gallery.innerHTML = \"\";\n    \n}\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionDelay: 250,\n    captionsData: 'alt',\n    close: true,\n  });\n\n function renderImages(hits) {\n    const imageHTML = hits.map(({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) => `\n<a class=\"gallery-link\" href=\"${largeImageURL}\">\n<img\n    class=\"gallery-image\"\n    src=\"${webformatURL}\"\n    alt=\"${tags}\"\n/>\n<ul class=\"info-list\">\n  <li class=\"info-item\">\n      <p class=\"info-title\">Likes</p>\n      <p class=\"info-value\">${likes}</p>\n  </li>\n  <li class=\"info-item\">\n      <p class=\"info-title\">Views</p>\n      <p class=\"info-value\">${views}</p>\n  </li>\n  <li class=\"info-item\">\n      <p class=\"info-title\">Comments</p>\n      <p class=\"info-value\">${comments}</p>\n  </li>\n  <li class=\"info-item\">\n      <p class=\"info-title\">Downloads</p>\n      <p class=\"info-value\">${downloads}</p>\n  </li>\n</ul>\n</a> `).join(``)\n    \n     gallery.insertAdjacentHTML(\"afterbegin\",imageHTML);\n     lightbox.refresh();\n     loadButton.style.display = \"block\";\n}\n\n\nloadButton.addEventListener(\"click\", (page) => {\n    loadButton.style.display = \"none\";\n    page++;\n   loadMoreImage();\n   checkLoadMoreButtonVisibility();\n   smoothScrollToGallery();\n})\n\nasync function loadMoreImage() {\n    getImage()\n    .then(({ hits }) => {\n      if (hits.length > 0) {\n        renderImages(hits);\n        loadButton.style.display = \"block\";\n      } else {\n        loadButton.style.display = \"none\";\n      }\n    })\n\n}\nfunction checkLoadMoreButtonVisibility() {\n   \n    if (gallery.children.length >= hits.length) {\n        loadButton.style.display = 'none';\n        iziToast.show({\n            message: \"We're sorry, but you've reached the end of search results.\",\n            color: \"blue\",\n            position: \"topRight\",\n        });\n    } else {\n        \n        loadButton.style.display = 'block';\n    }\n}\nfunction smoothScrollToGallery() {\n    const cardHeight = gallery.firstElementChild.getBoundingClientRect().height;\n    const scrollDistance = cardHeight * 2; \n    window.scrollBy({\n        top: scrollDistance,\n        behavior: \"smooth\", \n    });\n}\n\n"],"names":["activeForm","API_KEY","loaderContainer","loadButton","page","hits","axios","getImage","query","response","hideLoader","error","iziToast","showLoader","event","clearSearchResults","renderImages","gallery","lightbox","SimpleLightbox","imageHTML","webformatURL","largeImageURL","tags","likes","views","comments","downloads","loadMoreImage","checkLoadMoreButtonVisibility","smoothScrollToGallery","scrollDistance"],"mappings":"owBAMA,MAAMA,EAAa,SAAS,cAAc,OAAO,EAC3CC,EAAU,qCACVC,EAAkB,SAAS,cAAc,mBAAmB,EAC5DC,EAAa,SAAS,eAAe,aAAa,EACxD,IAAIC,EAAO,EACPC,EAAO,CAAA,EAEXC,EAAM,SAAS,QAAS,sBAExB,eAAeC,EAASC,EAAQ,GAAI,CAChC,OAAO,MAAOF,EAAM,IAAI,OAAQ,CAC5B,OAAQ,CACN,IAAKL,EACL,EAAGO,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMJ,EACN,SAAU,EACX,CACT,CAAO,EACA,KAAMK,IACDC,IACAL,EAAOI,EAAS,KAAK,KACdA,EAAS,KACnB,EACA,MAAOE,GAAU,CACdC,EAAS,KAAK,CACV,QAAS,GAAGD,IACZ,MAAO,MACP,SAAU,UAC1B,CAAa,CACb,CAAS,CACT,CAGA,SAASE,GAAa,CAClBX,EAAgB,MAAM,QAAU,OACjC,CACF,SAASQ,GAAa,CACnBR,EAAgB,MAAM,QAAU,MACjC,CAIHF,EAAW,iBAAiB,SAAWc,GAAU,CAC7CA,EAAM,eAAc,EAEpB,MAAMN,EAAQM,EAAM,OAAO,SAAS,MAAM,MAAM,OAEpDD,IAGAE,IAEOR,EAASC,CAAK,EAChB,KAAK,CAAC,CAAC,KAAAH,CAAI,IAAM,CACVA,EAAK,SAAW,EAChBO,EAAS,KAAK,CACV,QAAS,2EACT,MAAO,MACrB,SAAU,UACZ,CAAa,EAEDI,EAAaX,CAAI,EAGrBS,EAAM,OAAO,OACrB,CAAK,EACA,MAAMH,GAAS,CACZC,EAAS,KAAK,CACV,QAAS,GAAGD,IACZ,MAAO,MACnB,SAAU,UACV,CAAS,CACT,CAAK,CAGL,CAAC,EAGD,MAAMM,EAAU,SAAS,cAAc,UAAU,EAEjD,SAASF,GAAqB,CAC1BE,EAAQ,UAAY,EAExB,CAEA,MAAMC,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,IACd,aAAc,MACd,MAAO,EACX,CAAG,EAEF,SAASH,EAAaX,EAAM,CACzB,MAAMe,EAAYf,EAAK,IAAI,CAAC,CAAC,aAAAgB,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IAAM;AAAA,gCAC3EL;AAAA;AAAA;AAAA,WAGrBD;AAAA,WACAE;AAAA;AAAA;AAAA;AAAA;AAAA,8BAKmBC;AAAA;AAAA;AAAA;AAAA,8BAIAC;AAAA;AAAA;AAAA;AAAA,8BAIAC;AAAA;AAAA;AAAA;AAAA,8BAIAC;AAAA;AAAA;AAAA,MAGxB,EAAE,KAAK,EAAE,EAEVV,EAAQ,mBAAmB,aAAaG,CAAS,EACjDF,EAAS,QAAO,EAChBf,EAAW,MAAM,QAAU,OAChC,CAGAA,EAAW,iBAAiB,QAAUC,GAAS,CAC3CD,EAAW,MAAM,QAAU,OAE5ByB,IACAC,IACAC,GACH,CAAC,EAED,eAAeF,GAAgB,CAC3BrB,EAAU,EACT,KAAK,CAAC,CAAE,KAAAF,KAAW,CACdA,EAAK,OAAS,GAChBW,EAAaX,CAAI,EACjBF,EAAW,MAAM,QAAU,SAE3BA,EAAW,MAAM,QAAU,MAEnC,CAAK,CAEL,CACA,SAAS0B,GAAgC,CAEjCZ,EAAQ,SAAS,QAAUZ,EAAK,QAChCF,EAAW,MAAM,QAAU,OAC3BS,EAAS,KAAK,CACV,QAAS,6DACT,MAAO,OACP,SAAU,UACtB,CAAS,GAGDT,EAAW,MAAM,QAAU,OAEnC,CACA,SAAS2B,GAAwB,CAE7B,MAAMC,EADad,EAAQ,kBAAkB,sBAAqB,EAAG,OACjC,EACpC,OAAO,SAAS,CACZ,IAAKc,EACL,SAAU,QAClB,CAAK,CACL"}